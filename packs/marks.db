{"name":"Hunter's Mark Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"modules/plutonium/media/icon/spell/phb-hunters-mark.webp","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hunter's Mark\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"modules/plutonium/media/icon/spell/phb-hunters-mark.webp\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.shins-macros.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.shins-macros.\" + flag +\".damage\",\n                \"value\": \"1d6\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.TknKrOo51hsYX3Fk"}},"_id":"6lPe2qbSEAKwSWPm"}
{"name":"Hex Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"systems/dnd5e/icons/spells/evil-eye-eerie-1.jpg","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hex\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"systems/dnd5e/icons/spells/evil-eye-eerie-1.jpg\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    new Dialog({\n        title: \"Hex\",\n        buttons: {\n            str: {\n                label: \"Strength\", callback: async (html) => {\n                    curse(\"str\")\n                }\n            },\n            dex: {\n                label: \"Dexterity\", callback: async (html) => {\n                    curse(\"dex\")\n                }\n            },\n            con: {\n                label: \"Constitution\", callback: async (html) => {\n                    curse(\"con\")\n                }\n            },\n            int: {\n                label: \"Intelligence\", callback: async (html) => {\n                    curse(\"int\")\n                }\n            },\n            wis: {\n                label: \"Wisdom\", callback: async (html) => {\n                    curse(\"wis\")\n                }\n            },\n            cha: {\n                label: \"Charisma\", callback: async (html) => {\n                    curse(\"cha\")\n                }\n            },\n            cancel: {\n                label: \"Cancel\"\n            }\n        },\n        default: \"cancel\",\n    }).render(true);\n}\n\nasync function curse(abs) {\n\n    //let abs = html.find('#hexABS')[0].value\n\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.shins-macros.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.midi-qol.disadvantage.ability.check.\" + abs,\n                \"value\": 1,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.shins-macros.\" + flag +\".damage\",\n                \"value\": \"1d6,necrotic\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.Vu7xlfDXShGAvXCE"}},"_id":"eBlzd0DQyXOalbxc"}
{"name":"Hexblade Curse Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"systems/dnd5e/icons/spells/enchant-eerie-2.jpg","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hexblade Curse\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"systems/dnd5e/icons/spells/enchant-eerie-2.jpg\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.shins-macros.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.shins-macros.\" + flag + \".damage\",\n                \"value\": \"@attributes.prof\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.shins-macros.\" + flag + \".critRange\",\n                \"value\": \"19\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.WgD2JQHb6Qswwtt8"}},"_id":"l6ziutYnQdl6iUzl"}
{"$$deleted":true,"_id":"6lPe2qbSEAKwSWPm"}
{"$$deleted":true,"_id":"eBlzd0DQyXOalbxc"}
{"$$deleted":true,"_id":"l6ziutYnQdl6iUzl"}
{"name":"Hunter's Mark Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"modules/plutonium/media/icon/spell/phb-hunters-mark.webp","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hunter's Mark\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"modules/plutonium/media/icon/spell/phb-hunters-mark.webp\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.hunters-mark.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.hunters-mark.\" + flag +\".damage\",\n                \"value\": \"1d6\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.TknKrOo51hsYX3Fk"}},"_id":"vdNwjCWaliRIQiUo"}
{"name":"Hex Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"systems/dnd5e/icons/spells/evil-eye-eerie-1.jpg","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hex\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"systems/dnd5e/icons/spells/evil-eye-eerie-1.jpg\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    new Dialog({\n        title: \"Hex\",\n        buttons: {\n            str: {\n                label: \"Strength\", callback: async (html) => {\n                    curse(\"str\")\n                }\n            },\n            dex: {\n                label: \"Dexterity\", callback: async (html) => {\n                    curse(\"dex\")\n                }\n            },\n            con: {\n                label: \"Constitution\", callback: async (html) => {\n                    curse(\"con\")\n                }\n            },\n            int: {\n                label: \"Intelligence\", callback: async (html) => {\n                    curse(\"int\")\n                }\n            },\n            wis: {\n                label: \"Wisdom\", callback: async (html) => {\n                    curse(\"wis\")\n                }\n            },\n            cha: {\n                label: \"Charisma\", callback: async (html) => {\n                    curse(\"cha\")\n                }\n            },\n            cancel: {\n                label: \"Cancel\"\n            }\n        },\n        default: \"cancel\",\n    }).render(true);\n}\n\nasync function curse(abs) {\n\n    //let abs = html.find('#hexABS')[0].value\n\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.hunters-mark.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.midi-qol.disadvantage.ability.check.\" + abs,\n                \"value\": 1,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.hunters-mark.\" + flag + \".damage\",\n                \"value\": \"1d6,necrotic\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.Vu7xlfDXShGAvXCE"}},"_id":"njJ416EWO1aXthxE"}
{"name":"Hexblade Curse Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"systems/dnd5e/icons/spells/enchant-eerie-2.jpg","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hexblade Curse\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"systems/dnd5e/icons/spells/enchant-eerie-2.jpg\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: 10\n        },\n        icon: icon,\n        changes: [\n            {\n                \"key\": \"flags.hunters-mark.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.hunters-mark.\" + flag + \".damage\",\n                \"value\": \"@attributes.prof\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                \"key\": \"flags.hunters-mark.\" + flag + \".critRange\",\n                \"value\": \"19\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.WgD2JQHb6Qswwtt8"}},"_id":"8p1zh7HyRO0avfAY"}
{"name":"Blank Set","type":"script","author":"kS7Ol2KKzwnc7w0U","img":"icons/svg/dice-target.svg","scope":"global","command":"let duration = 10 //Number of rounds the effect would last\nlet label = \"Hunter's Mark\" //Name of the Effect. Hunter's Mark, Maneater's Mark, Hexblade Curse, ect\nlet icon = \"modules/plutonium/media/icon/spell/phb-hunters-mark.webp\" //Icon for the active effect\n\nlet origin = \"Actor.\" + actor.id\nlet target = Array.from(game.user.targets)[0];\nlet flag = label.replace(' ', '').replace(\"'\", '')\n\nif (target.actor.data.effects.find(e => e.data.label === label && e.data.origin === origin)) {\n    let removeList = [target.actor.effects.find(i => i.data.label === label && i.data.origin === origin).id]\n    target.actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n} else {\n    const effectData = {\n        label: label,\n        duration: {\n            rounds: duration\n        },\n        icon: icon,\n        changes: [\n            {\n                // leave this one alone.\n                \"key\": \"flags.hunters-mark.\" + flag,\n                \"value\": actor.data.name,\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                //For every change, have a set like this. supports dice, flat numbers, or @ notation like any other effect. @ notation, like @attributes.prof refer to the attacker's stats, not the marked creature.\n                \"key\": \"flags.hunters-mark.\" + flag + \".damage\",\n                \"value\": \"1d6\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            },\n            {\n                //It also supports conditional crit ranges. Both hard setting it, ex 19, and having a mod to it, ex -2. You can technically add to the crit range, which.. I guess would make it impossible to crit?? \n                \"key\": \"flags.hunters-mark.\" + flag + \".critRange\",\n                \"value\": \"19\",\n                \"mode\": 0,\n                \"priority\": \"20\"\n            }\n        ],\n        origin: origin,\n        disabled: false,\n        icon: icon,\n        label: label\n    }\n    await target.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","folder":null,"sort":0,"permission":{"default":0,"kS7Ol2KKzwnc7w0U":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.zvrYWEgVKMsIB69y"}},"_id":"6CR7nwMrBGXcojTr"}
